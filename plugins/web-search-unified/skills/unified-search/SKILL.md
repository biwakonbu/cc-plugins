---
name: unified-search
description: Gemini CLI、Codex CLI、WebSearch を並列実行して結果を統合。複数ソースからの徹底調査に最適。
allowed-tools: Bash, WebSearch
context: fork
---

# 統合 Web 検索スキル

3つの検索エンジンを並列実行し、結果を統合して高精度な情報を提供する。

## 検索エンジン

| エンジン | 特徴 | 強み |
|----------|------|------|
| **Gemini CLI** | Google Search 直接アクセス | 最新情報、包括的結果 |
| **Codex CLI** | OpenAI 組み込み検索 | 技術情報に強い |
| **WebSearch** | Claude 組み込み | 安定性、信頼性 |

## 実行手順

### 1. 並列検索の実行

**重要**: 以下の2つを**同時に**実行する:

#### A. Gemini + Codex 並列実行（Bash）

```bash
bash "$(dirname "$0")/../../scripts/parallel-search.sh" "{検索クエリ}"
```

#### B. WebSearch ツール呼び出し

WebSearch ツールで同じクエリを実行。

### 2. 結果の統合

3つのエンジンから得られた結果を以下の基準で統合:

#### 信頼度スコアリング

| 条件 | スコア |
|------|--------|
| 複数エンジンで同一 URL/情報 | +2（高信頼） |
| 公式ドメイン (.gov, .edu, 公式サイト) | +1 |
| 最新の日付情報あり | +1 |

#### URL 重複排除

- 同一 URL は1つにまとめる
- 検出エンジンのリストを付記

### 3. 出力フォーマット

以下の形式で結果をレポート:

```markdown
## 統合検索結果: {クエリ}

### 要約
{3エンジンの結果を統合した主要ポイント（3-5 点）}

### 高信頼度情報（複数エンジンで確認）
- [タイトル](URL) - 出典: Gemini, Codex, WebSearch
- ...

### エンジン別詳細

#### Gemini (Google Search)
{要約と主要リンク}

#### Codex (OpenAI Search)
{要約と主要リンク}

#### Claude WebSearch
{要約と主要リンク}

### ソース一覧

| ソース | URL | 検出エンジン | 信頼度 |
|--------|-----|-------------|--------|
| ... | ... | ... | ⭐⭐⭐ |
```

## エラーハンドリング

| 状況 | 動作 |
|------|------|
| 1エンジン失敗 | 他2エンジンの結果を使用、失敗を報告 |
| 2エンジン失敗 | 残り1エンジンの結果を返却、警告付き |
| 全エンジン失敗 | エラーメッセージと再試行案を提示 |

**フォールバック優先度**: Gemini > WebSearch > Codex

## 情報鮮度フィルタリング

検索結果を報告する前に鮮度を評価し、古い情報は適切に処理する。

### 自動判断基準

| ドメイン | 推奨鮮度 | 古い情報の扱い |
|---------|---------|---------------|
| **AI/LLM** | 6ヶ月以内 | 旧世代モデル情報は**破棄** |
| **フロントエンド** | 1年以内 | `[古い情報]` マーク付与 |
| **クラウドサービス** | 1年以内 | `[古い情報]` マーク付与 |
| **セキュリティ** | 3ヶ月以内 | 最新情報のみ採用 |
| **プログラミング言語** | 2年以内 | 参考として残す |
| **アルゴリズム・設計** | 制限なし | そのまま採用 |

### AI モデル関連の特別ルール

検索クエリに AI/LLM キーワードが含まれる場合、以下は**自動破棄**:
- 旧世代モデル: GPT-3.5以前、Claude 2以前、Gemini 1.0以前、Llama 2以前
- 2023年以前のベンチマーク・モデル比較記事
- 廃止された API（Codex API 等）

**保持対象**（古くても有効）:
- Transformer、Attention 等の基礎理論
- 学術論文（arxiv 等）
- 歴史的経緯の説明

### 出力フォーマット

ソース一覧に鮮度情報を付与:
- 2024-2025年: `✓` 最新
- 1-2年前: `[参考]` マーク
- それ以前: `[古い情報]` マーク、または破棄

### 判断困難時

目的が不明確な場合のみ、ユーザーに確認:
「最新情報のみで良いですか? 古い情報（2023年）も含めますか?」

## 使用例

ユーザー: 「TypeScript 5.0 の新機能を調べて」

1. parallel-search.sh "TypeScript 5.0 新機能" を実行
2. WebSearch で "TypeScript 5.0 新機能" を検索
3. 3つの結果を統合
4. 公式ドキュメント、ブログ記事、リリースノートを信頼度順に整理
5. 統合レポートを出力
